#!/bin/bash

# Install Homebrew
if [ ! "$(which brew)" ]; then
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Sudo without password
sudo sed -i '' 's/^%admin.*/%admin          ALL = (ALL) NOPASSWD:ALL/' /etc/sudoers

# Select the correct Xcode
sudo xcode-select -switch /Applications/Xcode.app/

# Programming languages
brew install ruby python python@2 node erlang elixir rust crystal
brew cask install dotnet-sdk

# Vim & MacVim
brew install vim --env=std --with-override-system-vi --build-from-source
brew install macvim --env=std --build-from-source

# Fonts
brew tap homebrew/cask-fonts
brew cask install font-hasklig font-fira-code font-inconsolata \
  font-roboto-mono font-source-code-pro font-bitstream-vera \
  font-cousine font-space-mono

# Basic tooling
brew install wget curl tree

# iTerm2
brew cask install iTerm2
ln -s ~/.iterm2 ~/Library/Preferences/com.googlecode.iterm2.plist

# Productivity (or not)
brew cask install google-chrome whatsapp spotify \
  alfred sync dropbox skype skype-for-business

# Programming
brew cask install tunnelblick sequel-pro tableplus rowanj-gitx

# VSCode
brew cask install visual-studio-code
mkdir -p ~/Library/Application\ Support/Code/User
ln -s ~/.vscode/settings.json ~/Library/Application\ Support/Code/User
ln -s ~/.vscode/keybindings.json ~/Library/Application\ Support/Code/User
ln -s ~/.vscode/snippets ~/Library/Application\ Support/Code/User
code --install-extension azemoh.one-monokai \
     --install-extension jakebecker.elixir-ls \
     --install-extension esbenp.prettier-vscode

# OS/X settings
bin/osx
